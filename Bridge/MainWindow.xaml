<Window x:Class="Bridge.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Minimap" Height="600" Width="800"
        Icon="./Resources/Installer.ico">
    <Window.CommandBindings>
        <CommandBinding Command="Open" Executed="OpenMapDialog" />
        <CommandBinding Command="Close" Executed="QuitProgram" />
    </Window.CommandBindings>
    <Window.InputBindings>
        <KeyBinding Key="O" Modifiers="Control" Command="Open" />
        <KeyBinding Key="Q" Modifiers="Control" Command="Close" />
    </Window.InputBindings>

    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Minimap">
                <MenuItem Header="_Open Map" Command="Open" InputGestureText="Ctrl + O"/>
                <MenuItem Header="_Preferences" />
                <Separator />
                <MenuItem Header="_About Minimap" Click="LaunchAboutWindow" />
                <MenuItem Header="_Quit" Command="Close" InputGestureText="Ctrl + Q"/>
            </MenuItem>
            <MenuItem Header="_Server">
                <MenuItem Header="Start" Click="ToggleRunningStatus" Name="toggleRunningMenuItem" />
                <MenuItem Header="Reset" Click="RestartServer" />
                <Separator />
                <MenuItem Header="Configuration" />
            </MenuItem>
        </Menu>

        <StatusBar DockPanel.Dock="Bottom">
            <StatusBar.ItemsPanel>
                <ItemsPanelTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="40" />
                        </Grid.ColumnDefinitions>
                    </Grid>
                </ItemsPanelTemplate>
            </StatusBar.ItemsPanel>
            <StatusBarItem Grid.Column="0">
                <TextBlock Name="runningStatusItem">Server stopped</TextBlock>
            </StatusBarItem>
            <StatusBarItem Grid.Column="1" HorizontalAlignment="Right">
                <Slider x:Name="mapCanvasScaleSlider" Width="150" Value="1" Orientation="Horizontal" HorizontalAlignment="Left" 
                        IsSnapToTickEnabled="True" Minimum="0.25"  Maximum="4" TickPlacement="BottomRight" 
                        Ticks="0.25, 0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4"/>
            </StatusBarItem>
            <StatusBarItem Grid.Column="2">
                <TextBlock Text="{Binding ElementName=mapCanvasScaleSlider,Path=Value,StringFormat=0%}" />
            </StatusBarItem>
        </StatusBar>

        <ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible">
            <Canvas Name="canvas" MouseDown="Canvas_MouseDown_1" MouseMove="Canvas_MouseMove_1" >
                <Canvas.LayoutTransform>
                    <ScaleTransform CenterX="0" CenterY="0"
                                    ScaleX="{Binding ElementName=mapCanvasScaleSlider,Path=Value}"
                                    ScaleY="{Binding ElementName=mapCanvasScaleSlider,Path=Value}" />
                </Canvas.LayoutTransform>
                <Canvas.Background>
                    <SolidColorBrush Color="White" Opacity="0"/>
                </Canvas.Background>
            </Canvas>
        </ScrollViewer>
    </DockPanel>
</Window>
